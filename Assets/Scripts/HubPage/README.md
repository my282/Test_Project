# シーン遷移ボタンシステム - 使用ガイド

## 概要
このシステムを使用すると、Unity エディタ上で簡単にシーン遷移ボタンを作成・カスタマイズできます。画像のインポートやデザインの編集も直感的に行えます。

## セットアップ手順

### 1. HubPageManager の配置
1. Hierarchy で右クリック → `Create Empty` で空のゲームオブジェクトを作成
2. 名前を「HubPageManager」に変更
3. `HubPageManager.cs` スクリプトをアタッチ

### 2. Canvas の準備（まだない場合）
1. Hierarchy で右クリック → `UI` → `Canvas`
2. Canvas Scaler で解像度設定を調整（推奨: Scale With Screen Size）

## 画像のインポート方法

### ステップ 1: 画像ファイルの追加
1. Unity エディタの **Project ビュー**を開く
2. `Assets/Resources` フォルダを選択（なければ作成）
3. 使いたい画像ファイル（PNG, JPG など）を **ドラッグ&ドロップ**

### ステップ 2: スプライトへの変換
1. インポートした画像を **Project ビュー**で選択
2. **Inspector** ビューを確認
3. **Texture Type** を `Sprite (2D and UI)` に変更
4. **Apply** ボタンをクリック

### ステップ 3: ボタンへの適用
1. HubPageManager の Inspector を開く
2. ボタンリストから編集したいボタンを展開
3. **画像設定**セクションで：
   - **背景画像**: ボタンの背景に使用する画像をドラッグ&ドロップ
   - **アイコン画像**: ボタンに表示するアイコンをドラッグ&ドロップ

## ボタンの作成とカスタマイズ

### 新規ボタンの追加
1. HubPageManager の Inspector を開く
2. **「+ 新規ボタンを追加」** ボタンをクリック
3. 新しいボタンが追加されます

### ボタンの位置調整

#### レイアウトモードで自動配置
1. HubPageManager の Inspector で **レイアウト設定** を開く
2. **レイアウトモード** を選択（Vertical, Horizontal, Grid, Custom）
3. **ボタン間のスペース** と **開始位置** で調整
4. **「ボタンをプレビュー」** で確認

#### 個別のボタンを自由配置

各ボタンの設定で以下を編集できます：

#### ページ設定
- **シーン名**: 遷移先のシーン名（例: "MainMenu", "GameScene"）
- **ボタンテキスト**: ボタンに表示する文字

#### 画像設定
- **背景画像**: ボタンの背景に使用するスプライト
- **画像タイプ**: 
  - `Simple`: 通常の画像表示
  - `Sliced`: 9スライスで拡大縮小（枠付き画像に最適）
  - `Tiled`: タイル状に繰り返し
  - `Filled`: 塗りつぶし表示（プログレスバーなどに使用）
- **アイコン画像**: ボタンに追加するアイコン
- **アイコンサイズ**: アイコンの大きさ（20〜100px）
- **アイコン位置**: Left（左）、Right（右）、Top（上）、Bottom（下）、None（なし）

#### デザイン設定
- **背景色**: 画像がない場合の背景色（画像がある場合はテティント色として機能）
- **テキスト色**: ボタンテキストの色
- **フォントサイズ**: テキストの大きさ（10〜72pt）
- **ボタン幅**: ボタンの横幅（100〜600px）
- **ボタン高さ**: ボタンの縦幅（30〜200px）

#### ホバーエフェクト
- **ホバーエフェクトを有効化**: マウスオーバー時の色変更を有効化
- **ホバー時の色**: マウスオーバー時の色
- **クリック時の色**: クリック時の色

#### 枠線設定
- **枠線を表示**: ボタンに枠線を追加
- **枠線の色**: 枠線の色
- **枠線の太さ**: 枠線の太さ（1〜10px）

### レイアウト設定
- **Button Container**: ボタンを配置する親オブジェクト（自動生成可能）
- **Layout Mode**: ボタンの配置方法
  - **Vertical**: 縦方向に自動配置
  - **Horizontal**: 横方向に自動配置
  - **Grid**: グリッド状に配置
  - **Custom**: 各ボタンの個別設定を使用
- **Button Spacing**: ボタン間のスペース（自動配置時、0〜50px）
- **Start Position**: 開始位置（自動配置時）
- **Grid Columns**: 1行あたりのボタン数（グリッドモード時）
- **Grid Cell Size**: グリッドのマス目サイズ

### ボタンの位置調整（個別設定）
各ボタンで以下を設定できます：
- **カスタム位置を使用**: チェックすると自動配置を無視して自由配置
- **Anchor Preset**: ボタンの基準点（TopLeft, Center, BottomRight など）
- **Custom Position**: アンカーからの相対位置 (X, Y)

**詳しくは**: [BUTTON_POSITIONING.md](BUTTON_POSITIONING.md) を参照

## シーンの設定

### シーンをビルド設定に追加
ボタンで遷移するシーンは、Unity のビルド設定に追加する必要があります：

1. メニューから `File` → `Build Settings`
2. **Add Open Scenes** をクリック、または
3. シーンファイルをドラッグ&ドロップ

または、HubPageManager Inspector の **「シーンをビルド設定に追加」** ボタンをクリックして、追加が必要なシーンの一覧を確認できます。

## プレビュー方法

### ゲーム実行中のプレビュー
1. Unity エディタで **Play ボタン**を押してゲームを実行
2. HubPageManager の Inspector で **「プレビュー（再生中のみ）」** ボタンをクリック
3. ボタンが再生成され、変更が反映されます

### 実際の動作確認
1. ゲームを実行
2. 作成したボタンをクリック
3. 指定したシーンに遷移することを確認

## 推奨画像サイズ

### ボタン背景画像
- **通常サイズ**: 300x60px（デフォルトボタンサイズ）
- **大きめ**: 600x120px
- **9スライス用**: 100x100px（枠部分を含む）

### アイコン画像
- **推奨サイズ**: 64x64px または 128x128px
- **形式**: 正方形が理想的

## トラブルシューティング

### ボタンが表示されない
- Canvas が作成されているか確認
- Button Container が設定されているか確認
- ゲームを実行しているか確認

### 画像が表示されない
- 画像が Sprite として設定されているか確認
- 画像の Inspector で Texture Type を確認
- 背景画像が設定されているのに背景色が強い場合、背景色を白に設定

### シーン遷移が動作しない
- シーン名が正確か確認（大文字小文字も区別されます）
- シーンがビルド設定に追加されているか確認
- Console ウィンドウでエラーメッセージを確認

## サンプルデザイン例

### 例1: シンプルなテキストボタン
- 背景画像: なし
- 背景色: 白
- テキスト色: 黒
- ホバーエフェクト: 有効（グレー）
- 枠線: 有効（黒、2px）

### 例2: アイコン付きボタン
- 背景画像: ボタン用スプライト
- アイコン画像: ホームアイコン
- アイコン位置: Left
- アイコンサイズ: 40px

### 例3: カスタム画像ボタン
- 背景画像: カスタムデザインのスプライト
- 画像タイプ: Sliced（9スライス）
- テキスト色: 白
- ホバーエフェクト: 有効

## 応用例

### ボタンアニメーション
`HubPageManager` と `Animator` を組み合わせて、ボタンにアニメーションを追加できます。

### カスタムプレハブ
より複雑なボタンデザインが必要な場合は、カスタムボタンプレハブを作成して **Custom Button Prefab** に設定できます。

### 動的ボタン生成
スクリプトから `pageButtons` リストを操作することで、実行時にボタンを動的に追加・削除できます。

## サポート

問題が発生した場合は、以下を確認してください：
1. Unity のコンソールログ
2. HubPageManager のすべての設定
3. シーンの階層構造

---

**作成日**: 2026年2月10日  
**バージョン**: 1.0
